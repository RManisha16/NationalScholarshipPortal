@model IEnumerable<NScholarshipP.Models.InstituteApplication>

@{
    ViewData["Title"] = "Institute Applications - State";
}

<style>
    body {
        background: linear-gradient(135deg, #e3f2fd, #f5faff);
        font-family: "Poppins", sans-serif;
        min-height: 100vh;
    }

    h3 {
        font-weight: 700;
        color: #0d47a1;
        letter-spacing: 0.5px;
    }

    .filter-buttons a {
        border-radius: 50px;
        font-weight: 500;
        transition: all 0.3s ease;
        margin-right: 8px;
        padding: 8px 18px;
    }

        .filter-buttons a:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

    .btn-light {
        border-radius: 30px;
        font-weight: 500;
    }

    table {
        border-radius: 15px;
        overflow: hidden;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(8px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }

    th {
        background: linear-gradient(135deg, #1565c0);
        color: white !important;
        font-weight: 600;
    }

    tbody tr:hover {
        background-color: #e3f2fd;
    }

    .badge {
        font-size: 0.9rem;
        border-radius: 10px;
        padding: 6px 12px;
    }

    .btn-outline-dark {
        border-radius: 25px;
    }

        .btn-outline-dark:hover {
            background-color: #1565c0;
            color: white;
        }

    .alert {
        border-radius: 12px;
        font-weight: 500;
    }

    @@keyframes fadeIn {
        from

    {
        opacity: 0;
        transform: translateY(15px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }

    }
</style>

<div class="container py-4">
    <h3 class="text-center mb-4">Institute Applications (@(Model?.Count() ?? 0))</h3>

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success text-center">@TempData["Success"]</div>
    }
    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger text-center">@TempData["Error"]</div>
    }

    <div class="d-flex justify-content-between mb-4 align-items-center">
        <a asp-action="Dashboard" class="btn btn-light shadow-sm">
            ← Back to Dashboard
        </a>
        <div class="filter-buttons">
            <a asp-action="InstituteApplications" asp-route-filter="all"
               class="btn @(ViewBag.Filter == "all" ? "btn-secondary text-white" : "btn-outline-secondary") fw-bold">
                All
            </a>
            <a asp-action="InstituteApplications" asp-route-filter="pending"
               class="btn @(ViewBag.Filter == "pending" ? "btn-primary text-white" : "btn-outline-primary") fw-bold">
                Pending
            </a>
            <a asp-action="InstituteApplications" asp-route-filter="forwarded"
               class="btn @(ViewBag.Filter == "forwarded" ? "btn-info text-white" : "btn-outline-info") fw-bold">
                Forwarded
            </a>
            <a asp-action="InstituteApplications" asp-route-filter="rejected"
               class="btn @(ViewBag.Filter == "rejected" ? "btn-danger text-white" : "btn-outline-danger") fw-bold">
                Rejected
            </a>
        </div>
    </div>

    <table class="table table-hover text-center align-middle">
        <thead>
            <tr>
                <th>#</th>
                <th>Institute</th>
                <th>District / State</th>
                <th>Submitted</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @if (Model == null || !Model.Any())
            {
                <tr>
                    <td colspan="6" class="text-center text-muted py-4">No institute applications found.</td>
                </tr>
            }
            else
            {
                var i = 1;
                foreach (var inst in Model)
                {
                    <tr>
                        <td>@i</td>
                        <td>
                            @inst.InstituteName <br />
                            <small class="text-muted">Code: @inst.InstituteCode</small>
                        </td>
                        <td>@inst.District / @inst.State</td>
                        <td>@inst.SubmittedOn.ToLocalTime().ToString("dd-MMM-yyyy")</td>
                        <td>
                            @switch (inst.Status)
                            {
                                case "Pending":
                                    <span class="badge bg-warning text-dark">Pending</span>
                                    ;
                                    break;
                                case "VerifiedByState":
                                    <span class="badge bg-info text-dark">Verified</span>
                                    ;
                                    break;
                                case "ForwardedToMinistry":
                                    <span class="badge bg-primary">Forwarded</span>
                                    ;
                                    break;
                                case "ApprovedByMinistry":
                                    <span class="badge bg-success">Approved</span>
                                    ;
                                    break;
                                case "RejectedByState":
                                    <span class="badge bg-danger">Rejected</span>
                                    ;
                                    break;
                                default:
                                    <span class="badge bg-secondary">@inst.Status</span>
                                    ;
                                    break;
                            }
                        </td>
                        <td>
                            <a asp-action="InstituteDetails" asp-route-id="@inst.Id"
                               class="btn btn-sm btn-outline-dark px-3">
                                View Details
                            </a>
                        </td>
                    </tr>
                    i++;
                }
            }
        </tbody>
    </table>
</div>
